<!-- –í login.html –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ script —Ç–µ–≥ -->
<script src="./supabase.js"></script>
<script>
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault()
        
        const username = document.getElementById('username').value.trim()
        const password = document.getElementById('password').value
        
        if (!username || !password) {
            alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!')
            return
        }
        
        const button = e.target.querySelector('button')
        const originalText = button.textContent
        button.textContent = '‚è≥ –í—Ö–æ–¥...'
        button.disabled = true
        
        try {
            const user = await window.supabaseAPI.loginUser(username, password)
            localStorage.setItem('currentUser', user.username)
            alert('‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!')
            window.location.href = 'index.html'
        } catch (error) {
            alert('‚ùå ' + error.message)
        } finally {
            button.textContent = originalText
            button.disabled = false
        }
    })

    function showForgotPassword() {
        alert('üîê –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!')
    }
</script>
