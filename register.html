<!-- Ð’ register.html Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ script Ñ‚ÐµÐ³ -->
<script src="./supabase.js"></script>
<script>
    document.getElementById('registerForm').addEventListener('submit', async function(e) {
        e.preventDefault()
        
        const username = document.getElementById('username').value.trim()
        const password = document.getElementById('password').value
        const confirmPassword = document.getElementById('confirmPassword').value
        
        if (username.length < 3) {
            alert('âŒ Username Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒè‡³å°‘ 3 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°!')
            return
        }
        
        if (password.length < 1) {
            alert('âŒ Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ!')
            return
        }
        
        if (password !== confirmPassword) {
            alert('âŒ ÐŸÐ°Ñ€Ð¾Ð»Ð¸ Ð½Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÑŽÑ‚!')
            return
        }
        
        const button = e.target.querySelector('button')
        const originalText = button.textContent
        button.textContent = 'â³ Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ...'
        button.disabled = true
        
        try {
            await window.supabaseAPI.registerUser(username, password)
            alert('ðŸŽ‰ Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð°! Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ð¾Ð¹Ñ‚Ð¸ Ð² Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚.')
            window.location.href = 'login.html'
        } catch (error) {
            alert('âŒ ' + error.message)
        } finally {
            button.textContent = originalText
            button.disabled = false
        }
    })
</script>
